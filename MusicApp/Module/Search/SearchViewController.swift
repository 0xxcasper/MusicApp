//
//  SearchViewController.swift
//  MusicApp
//
//  Created admin on 24/03/2020.
//  Copyright © 2020 SangNX. All rights reserved.
//
//  Template generated by Juanpe Catalán @JuanpeCMiOS
//

import UIKit

class SearchViewController: BaseViewController {
    
    @IBOutlet weak var tbView: UITableView!
    
    private lazy var search = { () -> UISearchController in
        let search = UISearchController(searchResultsController: nil)
        search.searchBar.placeholder = "Search music"
        return search
    }()
    
	var presenter: SearchPresenterProtocol?
    
	override func viewDidLoad() {
        super.viewDidLoad()
        setUpViews()
        setUpTbView()
    }
    
    private func setUpViews() {
        self.navigationItem.searchController = search
    }
    
    private func setUpTbView() {
        tbView.registerXibFile(TrendingView.self)
        tbView.separatorStyle = .none
        tbView.dataSource = self
        tbView.delegate = self
    }
}

extension SearchViewController: UITableViewDataSource, UITableViewDelegate, TrendingViewDelegate
{
    func numberOfSections(in tableView: UITableView) -> Int {
        return 2
    }
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return section == 0 ? 1 : 0
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        if indexPath.section == 0 {
            let cell = tableView.dequeueTableCell(TrendingView.self)
            cell.delegate = self
            return cell
        } else {
            return UITableViewCell()
        }
    }
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        return indexPath.section == 0 ? 415 : 300
    }
    
    func onPressViewSeeAll() {
        let playlistVC = PlaylistRouter.createModule(type: .trending)
        self.push(controller: playlistVC)
    }
}

extension SearchViewController: SearchViewProtocol
{
    
}
